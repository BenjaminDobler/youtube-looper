<div class="tab-content">
  <div class="sidebar-header">
    <h3>Current Video</h3>
    <div class="header-actions">
      @if (loops().length > 0) {
        <button 
          class="btn-share" 
          (click)="onShareLoops()"
          [title]="shareSuccess() ? 'Copied!' : 'Share loops'"
          [class.success]="shareSuccess()"
        >
          <app-icon name="share" [size]="14"></app-icon>
        </button>
      }
    </div>
  </div>

  <!-- Pitch Control Section -->
  <div class="pitch-control-section">
    <div class="pitch-header">
      <span class="pitch-label">Pitch</span>
      <span class="pitch-value">{{ pitchShift() > 0 ? '+' : '' }}{{ pitchShift() }} {{ pitchShift() === 1 || pitchShift() === -1 ? 'semitone' : 'semitones' }}</span>
    </div>
    <div class="pitch-controls">
      <button class="btn-pitch" (click)="onPitchDown()" title="Lower pitch by 1 semitone">-</button>
      <button class="btn-pitch-reset" (click)="onPitchReset()" title="Reset pitch to normal">Reset</button>
      <button class="btn-pitch" (click)="onPitchUp()" title="Raise pitch by 1 semitone">+</button>
    </div>
  </div>

  @if (loops().length > 0) {
    <div class="loops-list">
      @for (loop of loops(); track loop.id) {
        <loop-card
          [loop]="loop"
          [isActive]="activeLoopId() === loop.id"
          (toggle)="onToggleLoop(loop)"
          (delete)="onDeleteLoop(loop.id)"
          (update)="onUpdateLoop($event)"
          (getCurrentTime)="getCurrentTime.emit($event)"
        />
      }
    </div>
  } @else {
    <div class="empty-state">
      <div class="empty-icon">
        <app-icon name="repeat" [size]="48"></app-icon>
      </div>
      <p>No loops yet</p>
      <p class="empty-hint">Click on the timeline below the video to create your first loop</p>
    </div>
  }
</div>
